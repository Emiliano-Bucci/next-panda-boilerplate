// eslint-disable-next-line
const fs = require('fs');
// eslint-disable-next-line
const path = require('path');

const iconsDir = path.join(__dirname, "../public/icons");
const outputFile = path.join(__dirname, "../src/utils/icon-mapping.ts");

const icons = fs.readdirSync(iconsDir).filter((file) => file.endsWith(".svg"));

const mapping = icons.reduce((acc, file) => {
  const name = file.replace(".svg", "");
  acc[name] = `@/icons/${file}`;
  return acc;
}, {});

const fileContent = `
/**
 * AUTO-GENERATED FILE
 * This file is generated by the generate-icon-mapping.js script.
 */
import dynamic from "next/dynamic";

export const iconMapping = {
  ${Object.entries(mapping)
    .map(
      ([key, value]) =>
        `"${key}": dynamic(() => import(/* webpackChunkName: "Icon-${key}" */ "${value}")),`,
    )
    .join("\n  ")}
};
`;

fs.writeFileSync(outputFile, fileContent);

console.log(`Icon mapping generated: ${outputFile}`);
